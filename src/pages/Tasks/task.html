<section class="tasks-page container py-4">
  <h2 class="mb-3">Tareas</h2>
  <p class="text-secondary mb-4">Filtra tareas por proyecto.</p>
  <!-- Botón para abrir modal de creación -->
  <button id="openCreateTaskModal" class="btn btn-primary btn-lg fw-bold shadow-sm mb-3">
    Crear tarea para este proyecto
  </button>
  <!-- Filtro de proyecto -->
  <div class="row g-3 align-items-center mb-3">
    <div class="col-auto">
      <label for="projectFilter" class="col-form-label">Proyecto</label>
    </div>
    <div class="col-sm-6">
      <select id="projectFilter" class="form-select">
        <!-- Opciones generadas por task.js -->
      </select>
    </div>
  </div>
  <!-- Tabla -->
  <div class="table-responsive">
    <table class="table table-striped table-hover align-middle">
      <thead class="table-dark">
        <tr>
          <th scope="col">ID</th>
          <th scope="col">Título</th>
          <th scope="col">Estado</th>
          <th scope="col">Prioridad</th>
          <th scope="col">Vence</th>
          <th scope="col">Creado</th>
          <th scope="col">Actualizado</th>
          <th scope="col">Proyecto</th>
        </tr>
      </thead>
      <tbody id="tasksTableBody">
        <!-- Filas generadas por task.js -->
      </tbody>
    </table>
  </div>
</section>
<!-- Modal pequeño para crear/editar tarea -->
<div id="createTaskModal" class="modal-custom" hidden>
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content" style="max-width: min(520px, 95%);">
      <div class="modal-header">
        <!-- Cambiable desde JS -->
        <h5 class="modal-title" id="ct_modal_title">Crear tarea</h5>
        <button type="button" class="btn-close" id="closeCreateTaskModal"></button>
      </div>
      <form id="createTaskForm">
        <div class="modal-body">
          <section class="modal-section mb-3">
            <h6 class="modal-section-title fw-semibold mb-2">Proyecto seleccionado</h6>
            <div class="form-floating">
              <input type="text" class="form-control" id="ct_project_name" placeholder="Proyecto" readonly />
              <label for="ct_project_name">Proyecto</label>
            </div>
          </section>
          <section class="modal-section mb-3">
            <h6 class="modal-section-title fw-semibold mb-2">Datos de la tarea</h6>
            <div class="form-floating mb-2">
              <input type="text" class="form-control" id="ct_title" name="title" placeholder="Título de la tarea" required />
              <label for="ct_title">Título</label>
            </div>
            <div class="form-floating mb-2">
              <textarea class="form-control" id="ct_description" name="description" placeholder="Descripción (opcional)" style="height: 100px"></textarea>
              <label for="ct_description">Descripción (opcional)</label>
            </div>
            <div class="row g-2">
              <div class="col-sm-6">
                <div class="form-floating">
                  <select class="form-select" id="ct_status" name="status">
                    <option value="pendiente">Pendiente</option>
                    <option value="en_progreso">En progreso</option>
                    <option value="completada">Completada</option>
                  </select>
                  <label for="ct_status">Estado</label>
                </div>
              </div>
              <div class="col-sm-6">
                <div class="form-floating">
                  <select class="form-select" id="ct_priority" name="priority">
                    <option value="LOW">Baja</option>
                    <option value="MEDIUM" selected>Media</option>
                    <option value="HIGH">Alta</option>
                  </select>
                  <label for="ct_priority">Prioridad</label>
                </div>
              </div>
            </div>
            <div class="form-floating mt-2">
              <input type="date" class="form-control" id="ct_dueDate" name="dueDate" />
              <label for="ct_dueDate">Fecha de vencimiento (opcional)</label>
            </div>
          </section>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-outline-secondary" id="closeCreateTaskModalFooter">Cancelar</button>
          <!-- Cambiable desde JS -->
          <button type="submit" class="btn btn-primary" id="ct_submit_btn">Crear tarea para este proyecto</button>
        </div>
      </form>
    </div>
  </div>
</div>
<div id="createTaskBackdrop" class="modal-backdrop-custom" hidden></div>
